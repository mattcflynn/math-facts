<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiplication Practice</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        #question, #feedback, #summary {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Multiplication Practice</h1>
    <p id="instruction">Enter a number to practice, or "*+*" to quit:</p>
    <input type="text" id="numInput" placeholder="Number to practice">
    <button onclick="startPractice()">Start Practice</button>

    <div id="question"></div>
    <input type="text" id="answerInput" style="display:none;" placeholder="Your answer">
    <button id="submitAnswerBtn" style="display:none;" onclick="submitAnswer()">Submit Answer</button>

    <p id="feedback"></p>
    <p id="summary"></p>

    <script>
        let wrong = [];
        let numToPractice = 0;
        let numList = [];
        let currentTest = 0;
        let correctAnswers = 0;
        const correctMessages = ["Good job!", "Right!", "Yep!", "Nailed it.", "Spot on!", "Bingo!", "Crushed it.", "Totally!", "Perfecto!", "You are killing it.", "Genius!", "Fantastic!", "You rock!", "Awesome!", "Niiiiiiiice!", "Yaaaasssss!", "So. Dang. Smart."];
        const incorrectMessages = ["Nope", "Sorry, that's not it", "Maybe next time", "No. Focus!", "Hmmm, no.", "Uuuuuuh, no.", "Ew, no!.", "Nasty! No way."];

        function startPractice() {
            const input = document.getElementById("numInput").value;
            document.getElementById("feedback").textContent = ""; // Clear feedback

            if (input === "*+*") {
                return;
            }

            const intIn = parseInt(input);
            if (isNaN(intIn)) {
                document.getElementById("feedback").textContent = "Please enter a valid number.";
                return;
            }

            numToPractice = intIn;
            numList = Array.from({length: 12}, (_, i) => i + 1); // list from 1 to 12
            correctAnswers = 0;
            wrong = [];

            document.getElementById("answerInput").style.display = "inline";
            document.getElementById("submitAnswerBtn").style.display = "inline";
            askQuestion();
        }

        function askQuestion() {
            if (numList.length > 0) {
                const randomIndex = Math.floor(Math.random() * numList.length);
                currentTest = numList.splice(randomIndex, 1)[0]; // Get random number from list
                document.getElementById("question").textContent = `What is ${currentTest} x ${numToPractice}?`;
            } else if (wrong.length > 0) {
                currentTest = wrong.pop();
                document.getElementById("question").textContent = `Retry: What is ${currentTest} x ${numToPractice}?`;
            } else {
                endPractice();
            }
        }

        function submitAnswer() {
            const answer = parseInt(document.getElementById("answerInput").value);

            if (isNaN(answer)) {
                document.getElementById("feedback").textContent = "Please enter a valid number.";
                return;
            }

            if (answer === currentTest * numToPractice) {
                document.getElementById("feedback").textContent = randomMessage(correctMessages);
                correctAnswers++;
            } else {
                document.getElementById("feedback").textContent = randomMessage(incorrectMessages);
                wrong.push(currentTest);
            }

            document.getElementById("answerInput").value = ""; // Clear input for next question
            askQuestion();
        }

        function randomMessage(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        function endPractice() {
            document.getElementById("question").textContent = "";
            document.getElementById("answerInput").style.display = "none";
            document.getElementById("submitAnswerBtn").style.display = "none";
            if (wrong.length === 0) {
                document.getElementById("summary").textContent = `Wow, 100%! You got them all right!`;
            } else {
                document.getElementById("summary").textContent = `You got them all! You missed ${wrong.length} initially but nailed them on retries.`;
            }
        }
    </script>
</body>
</html>